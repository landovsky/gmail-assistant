# Gmail Assistant v2 — Application Configuration
# Copy to config/app.yml and customize.

auth:
  mode: personal_oauth            # or "service_account" for multi-user
  credentials_file: config/credentials.json
  token_file: config/token.json
  # service_account_file: config/service-account-key.json  # multi-user mode

database:
  backend: sqlite                 # or "postgresql" for multi-user
  sqlite_path: data/inbox.db
  # postgresql_url: postgresql://user:pass@localhost:5432/gmail_assistant

llm:
  classify_model: "gemini/gemini-2.0-flash"       # fast, cheap
  draft_model: "gemini/gemini-2.5-pro"            # high quality
  # context_model: "gemini/gemini-2.0-flash"      # context gathering (same as classify)
  # Alternative models (any LiteLLM-supported model):
  # classify_model: "claude-haiku-4-5-20251001"
  # draft_model: "claude-sonnet-4-5-20250929"
  # classify_model: "gpt-4o-mini"
  # draft_model: "gpt-4o"

sync:
  # pubsub_topic: "projects/my-project/topics/gmail-push"  # for push notifications
  fallback_interval_minutes: 15

server:
  host: "0.0.0.0"
  port: 8000
  log_level: info

# ── Routing — config-driven rules for routing emails to pipelines or agents ──
routing:
  rules:
    - name: pharmacy_support
      match:
        forwarded_from: "info@dostupnost-leku.cz"
      route: agent
      profile: pharmacy
    - name: default
      match:
        all: true
      route: pipeline

# ── Agent profiles — system prompt, tools, model config per agent type ──
agent:
  profiles:
    pharmacy:
      model: "gemini/gemini-2.5-pro"
      max_tokens: 4096
      temperature: 0.3
      max_iterations: 10
      system_prompt_file: "config/prompts/pharmacy.txt"
      tools:
        - search_drugs
        - manage_reservation
        - web_search
        - send_reply
        - create_draft
        - escalate
